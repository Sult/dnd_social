{% extends "base.html" %}
{% load compress %}
{% load bootstrap4 %}
{% block title %}Campaigns{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-8">
    <h1 class="page-header">Campaigns</h1>
    <div class="pull-right">
      <button type="button" class="btn btn-secondary">Find group</button>
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#campaignForm">New Campaign</button>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-lg-8">
    {% if not campaigns %}
    <p>You currently are not registered to any campaigns. Maybe try finding a group or create your own</p>
    {% else %}
    <div class="row">
      {% for obj in campaigns %}
      <div class="col-lg-4">
        <div class="card">
          <img class="card-img-top" src="{{obj.image_url}}" alt="Campaign Image">
          <div class="card-body">
            <h5 class="card-title">{{obj.name|title}}</h5>
            <p class="card-text">{{obj.desc}}</p>
            <div class="float-right">
              <a href="{% url 'campaigns:campaign_details' slug=obj.slug %}" class="btn btn-primary">Play</a>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

    </div>
  </div>
</div>

{% include "partials/modal_form.html" with form=form id="campaignForm" namespace="campaigns:campaigns" title="New campaign" %}
{% endblock %}

{% block js %}
{% compress js inline %}
<script type="text/javascript">
{% if form.errors%}
$("#campaignForm").modal("show");
{% endif %}
</script>
{% endcompress %}
{% endblock %}